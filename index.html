<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamCalc ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π</title>
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="application-name" content="DreamCalc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DreamCalc">
    <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#2563eb">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#2563eb">

    <!-- –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º -->
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#2563eb">
    <link rel="shortcut icon" href="favicon.ico">

    <!-- –ú–∞–Ω–∏—Ñ–µ—Å—Ç PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="./styles/main.css">
    
    <!-- –°—Ç–∏–ª–∏ —Ñ—É—Ç–µ—Ä–∞ -->
    <link rel="stylesheet" href="./modules/footer/footer.css">
    
    <!-- –®—Ä–∏—Ñ—Ç Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="container py-5" id="app">
        <header class="text-center mb-5">
            <h1 class="display-5 fw-bold text-primary">
                üéØ DreamCalc ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π
            </h1>
            <p class="lead text-muted">
                –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç–µ —Å–≤–æ–µ–π —Ü–µ–ª–∏ —Å —É—á—ë—Ç–æ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
            </p>
        </header>

        <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —á–µ—Ä–µ–∑ JS -->
        <main id="main-content">
            <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥—É—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </main>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ—É—Ç–µ—Ä–∞ -->
        <div id="footer-container">
            <!-- –í—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ñ—É—Ç–µ—Ä -->
            <footer class="mt-5 pt-4 border-top text-center text-muted">
                <p>DreamCalc v2.0.0 ‚Ä¢ –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏</p>
            </footer>
        </div>
    </div>

    <!-- Bootstrap JS + Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- –ù–∞—à–∏ JavaScript-–º–æ–¥—É–ª–∏ -->
    <script type="module" src="./scripts/app.js"></script>
    
    <!-- –ú–æ–¥—É–ª—å —Ñ—É—Ç–µ—Ä–∞ -->
    <script type="module" src="./modules/footer/footer.js"></script>

    <script>
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è PWA
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('service-worker.js')
                .then(function(registration) {
                    console.log('ServiceWorker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ:', registration.scope);
                    
                    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        console.log('–ù–∞–π–¥–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ServiceWorker');
                        
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                console.log('–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                                // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                                if (window.FooterModule && window.FooterModule.showNotification) {
                                    window.FooterModule.showNotification(
                                        'üîÑ –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 
                                        'info'
                                    );
                                }
                            }
                        });
                    });
                })
                .catch(function(error) {
                    console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ServiceWorker:', error);
                });
        });
    }

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ—É—Ç–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        fetch('./modules/footer/footer.html')
            .then(response => {
                if (!response.ok) throw new Error('–§–∞–π–ª —Ñ—É—Ç–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω (404)');
                return response.text();
            })
            .then(html => {
                const container = document.getElementById('footer-container');
                if (container) {
                    container.innerHTML = html;
                    console.log('‚úÖ –ú–æ–¥—É–ª—å —Ñ—É—Ç–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
                    
                    // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ –∑–∞–≥—Ä—É–∑–∫–µ
                    setTimeout(() => {
                        if (window.FooterModule && window.FooterModule.showNotification) {
                            window.FooterModule.showNotification('üéØ –§—É—Ç–µ—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
                        }
                    }, 1000);
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ—É—Ç–µ—Ä–∞:', error);
                // –§–æ–ª–±—ç–∫: –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ñ—É—Ç–µ—Ä –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –µ—Å—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
                const container = document.getElementById('footer-container');
                if (container) {
                    container.innerHTML = `
                        <footer class="mt-5 pt-4 border-top text-center text-muted">
                            <p>DreamCalc v2.0.0 ‚Ä¢ –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏</p>
                            <p class="small text-danger">–ú–æ–¥—É–ª—å —Ñ—É—Ç–µ—Ä–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω: ${error.message}</p>
                        </footer>
                    `;
                }
            });
    });

    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –ª—É—á—à–µ–≥–æ UX
    window.addEventListener('error', function(event) {
        console.error('–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞:', event.error);
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        if (window.FooterModule && window.FooterModule.showNotification) {
            window.FooterModule.showNotification(
                '‚ö†Ô∏è –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 
                'error'
            );
        }
    });
    </script>

</body>
</html>